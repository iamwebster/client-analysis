# Тестовое задание для Python-разработчика

## Содержание
- [Тестовое задание для Python-разработчика](#тестовое-задание-для-python-разработчика)
  - [Содержание](#содержание)
  - [Техническое задание](#техническое-задание)
  - [Решение](#решение)
    - [Загрузка проекта](#загрузка-проекта)
    - [Правильное расположение рабочего файла](#правильное-расположение-рабочего-файла)
    - [Название рабочего файла](#название-рабочего-файла)
    - [Функционал](#функционал)
    - [Пример использования](#пример-использования)
    - [Точка входа](#точка-входа)


## Техническое задание
1. На вход скрипту подается CSV файл с информацией о клиентах и их взаимодействии с платформой CDP. Пример структуры данных в CSV файле:
client_id (идентификатор клиента)
action (действие клиента на платформе, например, просмотр продукта, добавление в корзину, оформление заказа)
timestamp (временная метка совершения действия)

2. Реализуйте функцию load_data(file_path), которая загружает данные из CSV файла в формате pandas DataFrame.

3. Создайте функции для:
- Агрегации данных по клиентам, подсчета числа действий каждого клиента.
- Фильтрации данных по определенным критериям (например, только действия оформления заказа).

4. Реализуйте функцию analyze_client_behavior(data), которая проводит анализ данных клиентов на основе их действий:
- Определите среднее число действий клиентов.
- Найдите топ-5 клиентов с наибольшим числом действий.

5. Создайте функцию save_processed_data(data, output_file) для сохранения обработанных данных после анализа в формате CSV или другом удобном для дальнейшего использования формате.


## Решение

### Загрузка проекта
```bash
git clone https://github.com/iamwebster/client-analysis.git
```

```bash
cd client-analysis
```
### Правильное расположение рабочего файла
В директорию рядом с файлом main.py поместить файл с расширением csv. 
### Название рабочего файла
Далее в main.py заменить 'test.csv' на название нужного файла.
```python
file_name = 'test.csv'
```
### Функционал
Далее в конструкции if __name__ == "__main__", после инициализации экземпляра класса, мы можем использовать его методы. Доступные методы:
```
- get_dataframe()
- get_client_actions()
- filter_client_data()
- analyze_client_behavior()
- save_processed_data()
```

Подробнее о методах написано в самом классе ClientAnalysis в analysis.py.

### Пример использования

```python
if __name__ == '__main__':
    # Инициализация экземпляра класса с переданным путем к файлу
    client = ClientAnalysis(file_path=file_path)

    # Получение ДатаФрейма
    client.get_dataframe()

    # После каждого этапа (применения метода) можно выполнить 
    # cохранение обработанных данных в формате CSV

    # Подсчет числа действий каждого клиента
    client.get_client_actions()
    client.save_processed_data(file_name='new_file.csv')

    # Или

    # Фильтрация данных по определенным критериям
    client.filter_client_data(client_id=1, action='purchase')
    client.save_processed_data(file_name='new_file.csv')

    # Или

    # Получение топ-5 клиентов с наибольшим числом действий
    client.analyze_client_behavior()
    client.save_processed_data(file_name='new_file.csv')

    # Или можно использовать комбинации из методов

    # Сначала фильтрация по активности, а потом подсчет этой активности
    # для каждого клиента
    client.filter_client_data(action='purchase')
    client.get_client_actions()
    client.save_processed_data(file_name='new_file.csv')

```

### Точка входа
Точкой входа в приложение является файл main.py, достаточно его запустить.
```bash
python main.py
```